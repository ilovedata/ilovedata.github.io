[["index.html", "Bookdown 패키지를 사용한 한글책 제작의 기초 개요", " Bookdown 패키지를 사용한 한글책 제작의 기초 서울시립대학교 통계학과 이용희 2021-05-16 개요 이 책은 bookdown 패키지를 이용하여 한글로 수식, 그림, 표를 포함한 책을 작성할 때 필요한 사항과 유용한 팁을 수록한 안내서입니다. bookdown 패키지의 기초와 자세한 사용법은 bookdown package documentation 와 Rmarkdown documentation 을 참조하세오. bookdown 패키지를 이용하여 책을 만들려면 먼저 다음과 같이 패키지를 설치해야 합니다. install.packages(&quot;bookdown&quot;) # or the development version # devtools::install_github(&quot;rstudio/bookdown&quot;) 그리고 이 책에서 이용한 패키지의 목록은 다음과 같습니다. library(dplyr) library(tidyr) library(ggplot2) library(kableExtra) library(equatiomatic) library(sjPlot) library(sjmisc) library(sjlabelled) library(modelsummary) library(flextable) library(lme4) library(xfun) # automatically create a bib database for R packages knitr::write_bib(c( .packages(), &#39;bookdown&#39;, &#39;knitr&#39;, &#39;rmarkdown&#39; ), &#39;packages.bib&#39;) "],["intro.html", "제 1 장 책의 구성요소와 형식 1.1 책 구성요소의 지정과 참조 1.2 구성요소의 구조 1.3 구성요소 이름의 변경 1.4 블럭 요소 1.5 참고문헌 1.6 PDF 화일", " 제 1 장 책의 구성요소와 형식 1.1 책 구성요소의 지정과 참조 Bookdown 에서는 하나의 Rmd 화일이 하나의 장(chapter)이 된다. 따라서 하나의 장에 대한 Rmd 화일은 처음에 다음과 같이 # 으로 장의 이름을 지정한다. 다음으로 하위 절 등의 제목은##, ### 순으로 지정한다. 장 이름을 참조하는 장 이름을 정의하는 문장 뒤에 {#label} 을 붙여준다. 장을 참조하는 방법은 명령문 \\@ref(label) 으로 참조한다. (예: 다음 내용은 1 장에 나타나 있다). # 소개 {#intro} ## 공식 ### 설명 장의 이름이 한글인 경우 참조문 {#label}을 붙여주지 않으면 오류가 나오는 경우가 있으니 꼭 붙여주자. 1.2 구성요소의 구조 책의 구성요소는 다음과 같이 part, chapter, appendix 등으로 구분된다. {-} 를 뒤에 붙이면 장이나 절의 번호가 붙지 않는다. # (PART) Part I {-} # Prefeace {-} # Chapter One # Chapter Two # (PART) Part II {-} # Chapter Three # (APPENDIX) Appendix {-} # Appendix A # Appendix B 1.3 구성요소 이름의 변경 책에서 나오는 chapter, section 과 equation, figure 등의 제목을 영문에서 한글로 바꾸려면 _bookdown.yml 에 댜음과 같은 명령어를 추가합니다. language: label: fig: &quot;그림 &quot; tab: &quot;표 &quot; eq: &quot;공식 &quot; def: &#39;정의 &#39; exm: &#39;예제 &#39; proof: &#39;증명. &#39; remark: &#39;참고. &#39; ui: chapter_name: [&quot;제 &quot;, &quot; 장&quot;] appendix_name: [&quot;부록 &quot;, &quot;: &quot;] 1.4 블럭 요소 중요한 내용이나 강조하고 싶은 내용을 블럭으로 만들 때 다음과 같은 블럭 명령어 block2 를 사용한다. 블럭 요소 안에서는 markdown 의 item 를 구성하는 형식들(-, +, *) 등이 나타나면 PDF 로 책을 만들때 오류가 자주 나타나므로 이용하지 않는 것이 좋다. ```{block2, type=&#39;rmdnote&#39;, eval=F} 이 책에서 사용된 기호, 표기법, 프로그램의 규칙과 쓰임은 다음과 같습니다. 스칼라(scalar)와 일변량 확률변수는 일반적으로 보통 글씨체의 소문자로 표기한다. 특별한 이유가 있는 경우 대문자로 표시할 것이다. 벡터, 행렬, 다변량 확률벡터는 굵은 글씨체로 표기한다. ``` 이 책에서 사용된 기호, 표기법, 프로그램의 규칙과 쓰임은 다음과 같습니다. 스칼라(scalar)와 일변량 확률변수는 일반적으로 보통 글씨체의 소문자로 표기한다. 특별한 이유가 있는 경우 대문자로 표시할 것이다. 벡터, 행렬, 다변량 확률벡터는 굵은 글씨체로 표기한다. bookdown 패키지에서 제공하는 블럭의 종류(type)는 다음과 같다. rmdimportant rmdcaution rmdnote rmdcaution rmdwarning 1.5 참고문헌 1.5.1 YML 지정 참고 문헌은 지정된 bib 화일에 bibtex 형식으로 넣어준다. index.Rmd 의 yml 형식에 댜음과 같이 bib 화일과 참조 형식을 지정해준다. bibliography: [book.bib, packages.bib] biblio-style: apalike link-citations: true _output.yml 화일에는 PDF 로 출력하는 경우 사용되는 패키지 형식을 다음과 같이 지정한다. bookdown::pdf_book: citation_package: natbib 1.5.2 BIB 화일 packages.bib는 책에서 사용된 패키지의 참조 화일을 다음과 같은 명령문(index.Rmd 에 포함되어 있다)으로 자동적으로 생성한다. # automatically create a bib database for R packages knitr::write_bib(c( .packages(), &#39;bookdown&#39;, &#39;knitr&#39;, &#39;rmarkdown&#39; ), &#39;packages.bib&#39;) book.bib 화일에 본분에서 참조할 책이나 논문을 bibtex 형식으로 추가햐면 된다. 1.5.3 참조 방법 참조 방법은 @key 또는 [@key] 를 사용하여 [] 는 참조가 () 안에 출력된다. 예를 들면 교과서 Xie (2015) 는 bookdown 에 대한 매뉴얼이며 다음의 모형은 Battese, Harter, and Fuller (1988) 이 제안하였다 (Royall 1970) 1.6 PDF 화일 다음에 나오는 절차들은 Latex 으로 책을 PDF 화일로 만들기 위하여 필요한 작업들이다. 1.6.1 \\mainmatter 가장 처음으로 나타나는 장의 Rmd 화일의 첫 문장을 \\mainmatter 로 시작한다. \\mainmatter # 책의 구성요소와 형식 {#intro} 1.6.2 \\backmatter 책의 마지막 부분, 즉 부록과 참고문헌 사이에 다음과 같아 써준다. \\backmatter # References {-} 1.6.3 참조 형식의 변경 이 책에서는 참조의 형식을 \\usepackage{hyperref} 를 이용하여 작성하였다. 만약 참조의 형식을 footnote 형식으로 바꾸려면 preample.tex 에 대름과 같은 명령어를 추가한다. \\renewenvironment{quote}{\\begin{VF}}{\\end{VF}} \\let\\oldhref\\href \\renewcommand{\\href}[2]{#2\\footnote{\\url{#1}}} References "],["math.html", "제 2 장 수식 2.1 수학 수식 2.2 패키지 equatiomatic 2.3 정리 2.4 수식 예제", " 제 2 장 수식 2.1 수학 수식 2.1.1 수식 사용 환경 만들기 Latex 으로 수식을 사용하는 경우 _outout.yml 화일에 필요한 새로운 명령이나 패키지를 다음과 같이 별도의 화일로 지정할 수 있다. HTML with gitbook bookdown::gitbook: includes: before_body: preamble-mathjax.tex PDF with Latex bookdown::pdf_book: includes: in_header: latex/preamble.tex before_body: latex/before_body.tex after_body: latex/after_body.tex 위에서 언급한 PDF 화일을 위한 Latex 화일들은 여기서 찾을 수 있다. gitbook 형식을 이용하여 HTML 로 책을 만드는 경우 MathJax 에 포함되지 않은 Latex 패키지는 사용할 수 없다. 예를 들어 문자를 굵은 글씨체로 만들어 주는 Latex 패키지 bm 을 사용하지 못한다. 따라서 이러한 경우는 다음과 같이 새로운 명령어를 만들어서 preamble-mathjax.tex 에 넣어준다. MathJax 의 명령문을 정의하는 경우는 \\( 과 \\) 사이에 넣어 주어야 한다. preamble-mathjax.tex 의 내용 \\( \\newcommand{\\bm}[1]{\\boldsymbol{\\mathbf{#1}}} \\newcommand{\\pardiff}[2]{\\frac{\\partial #1}{\\partial #2 }} \\newcommand{\\pardiffl}[2]{{\\partial #1}/{\\partial #2 }} \\newcommand{\\pardiffd}[2]{\\frac{\\partial^2 #1}{\\partial #2^t \\partial #2 }} \\newcommand{\\pardiffdd}[3]{\\frac{\\partial^2 #1}{\\partial #2 \\partial #3 }} \\) 2.1.2 수식 참조 수식에 번호를 붙이고 라벨을 지정하여 참조하려면 다음과 같은 명령어를 사용한다. 라벨은 (\\#eq:label) 의 형식으로 지정한다. 주의할 점은 수식의 라벨은 반드시 eq: 으로 시작되어야 한다. Bookdown 패키지에서는 수식, 표, 그림 등의 라벨을 만들 경우 꼭 앞에 붙여주어야 하는 접두어(prefix)가 있으니 주의해야 한다. \\begin{equation} y_{i}= \\beta_0 + \\beta_1 x_{i} + e_{i} (\\#eq:reg) \\end{equation} 위의 명령어는 다음과 같이 출력된다. \\[\\begin{equation} y_{i}= \\beta_0 + \\beta_1 x_{i} + e_{i} \\tag{2.1} \\end{equation}\\] 위의 수식을 참조하려면 명령문 \\@ref(eq:reg) 으로 참조한다. 예를 들면 식 (2.1) 을 참조하세요. 2.2 패키지 equatiomatic 패키지 equatiomatic 를 이용하면 R 에서 얻은 결과를 이용하여 모형 추정식이나 추정식의 결과를 쉽게 나타낼 수 있다. 이제 몇 개의 예제를 살펴보자. 패키지 equatiomatic 에서 수식을 출력하는 자세한 방법은 패키지 설명서 를 참조하자. 이제 위에서 본 cars 자료를 가지고 선형회귀모형 (2.1) 에 나타난 회귀계수를 추정해보자. 아래는 R 프로그램에서 함수 lm을 이용한 추정결과이다. lmOut &lt;- lm(dist~speed, data=cars) summary(lmOut) ## ## Call: ## lm(formula = dist ~ speed, data = cars) ## ## Residuals: ## Min 1Q Median 3Q Max ## -29.069 -9.525 -2.272 9.215 43.201 ## ## Coefficients: ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) -17.5791 6.7584 -2.601 0.0123 * ## speed 3.9324 0.4155 9.464 1.49e-12 *** ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 ## ## Residual standard error: 15.38 on 48 degrees of freedom ## Multiple R-squared: 0.6511, Adjusted R-squared: 0.6438 ## F-statistic: 89.57 on 1 and 48 DF, p-value: 1.49e-12 위에서 주어진 선형회귀모형 (2.1)은 다음과 같은 회귀식을 추정한다. equatiomatic::extract_eq(lmOut, intercept = &quot;beta&quot;, use_coefs = FALSE) \\[ \\operatorname{dist} = \\beta_{0} + \\beta_{1}(\\operatorname{speed}) + \\epsilon \\] 추정 결과를 이용하면 자동차의 속도(\\(x\\) = speed)와 제동거리(\\(y\\) = dist)의 관계는 다음과 같은 회귀식으로 나타낼 수 있다. equatiomatic::extract_eq(lmOut, intercept = &quot;beta&quot;, use_coefs = TRUE) \\[ \\operatorname{\\widehat{dist}} = -17.58 + 3.93(\\operatorname{speed}) \\] 다음은 패키지 lme4의 sleepstudy를 선형혼합모형으로 적합한 결과를 보여준다. fm1 &lt;- lmer(Reaction ~ Days + (Days|Subject), sleepstudy) summary(fm1) ## Linear mixed model fit by REML [&#39;lmerMod&#39;] ## Formula: Reaction ~ Days + (Days | Subject) ## Data: sleepstudy ## ## REML criterion at convergence: 1743.6 ## ## Scaled residuals: ## Min 1Q Median 3Q Max ## -3.9536 -0.4634 0.0231 0.4634 5.1793 ## ## Random effects: ## Groups Name Variance Std.Dev. Corr ## Subject (Intercept) 612.10 24.741 ## Days 35.07 5.922 0.07 ## Residual 654.94 25.592 ## Number of obs: 180, groups: Subject, 18 ## ## Fixed effects: ## Estimate Std. Error t value ## (Intercept) 251.405 6.825 36.838 ## Days 10.467 1.546 6.771 ## ## Correlation of Fixed Effects: ## (Intr) ## Days -0.138 equatiomatic::extract_eq(fm1, intercept = &quot;beta&quot;, use_coefs = FALSE) \\[ \\begin{aligned} \\operatorname{Reaction}_{i} &amp;\\sim N \\left(\\alpha_{j[i]} + \\beta_{1j[i]}(\\operatorname{Days}), \\sigma^2 \\right) \\\\ \\left( \\begin{array}{c} \\begin{aligned} &amp;\\alpha_{j} \\\\ &amp;\\beta_{1j} \\end{aligned} \\end{array} \\right) &amp;\\sim N \\left( \\left( \\begin{array}{c} \\begin{aligned} &amp;\\mu_{\\alpha_{j}} \\\\ &amp;\\mu_{\\beta_{1j}} \\end{aligned} \\end{array} \\right) , \\left( \\begin{array}{cc} \\sigma^2_{\\alpha_{j}} &amp; \\rho_{\\alpha_{j}\\beta_{1j}} \\\\ \\rho_{\\beta_{1j}\\alpha_{j}} &amp; \\sigma^2_{\\beta_{1j}} \\end{array} \\right) \\right) \\text{, for Subject j = 1,} \\dots \\text{,J} \\end{aligned} \\] equatiomatic::extract_eq(fm1, intercept = &quot;beta&quot;, use_coefs = TRUE) \\[ \\begin{aligned} \\operatorname{\\widehat{Reaction}}_{i} &amp;\\sim N \\left(251.41_{\\alpha_{j[i]}} + 10.47_{\\beta_{1j[i]}}(\\operatorname{Days}), \\sigma^2 \\right) \\\\ \\left( \\begin{array}{c} \\begin{aligned} &amp;\\alpha_{j} \\\\ &amp;\\beta_{1j} \\end{aligned} \\end{array} \\right) &amp;\\sim N \\left( \\left( \\begin{array}{c} \\begin{aligned} &amp;0 \\\\ &amp;0 \\end{aligned} \\end{array} \\right) , \\left( \\begin{array}{cc} 24.74 &amp; 0.07 \\\\ 0.07 &amp; 5.92 \\end{array} \\right) \\right) \\text{, for Subject j = 1,} \\dots \\text{,J} \\end{aligned} \\] 2.3 정리 수학에서 정리, 예제 등 다음과 같은 형식으로 나타낸다. 정리는 명령문 \\@ref(thm:gauss) 로 참조할 수 있다 (예: 위의 정리 2.1는 …) bookdown 패키지에서 정의된 정리의 여러 가지 형식들은 패키지 안내서 에서 찾을 수 있다. ```{theorem, name =&#39;가우스 정리&#39;, label=&quot;gauss&quot;} 선형회귀모형 $\\bm y = \\bm X {\\bm \\beta} + \\bm e$에서 $E( \\bm e)=0, Var( \\bm e)=I\\sigma^2$이 성립하면 최소제곱 추정량 $\\bm b=(X^tX)^{-1}X^t \\bm y$는 $\\bm beta$의 최소분산 선형 불편추정량은 이다. 이정리를 Gauss-Markov 정리라고 하며 이는 회귀계수 $\\bm \\beta$의 모든 선형 불편 추정량중에 최소제곱 추정량 $\\bm b=(X^tX)^{-1}X^t \\bm y$이 가장 작은 분산을 가짐을 뜻한다 (Best Linear Unbiased Estimator; BLUE). ``` Theorem 2.1 (가우스 정리) 선형회귀모형 \\(\\bm y = \\bm X {\\bm \\beta} + \\bm e\\)에서 \\(E( \\bm e)=0, Var( \\bm e)=I\\sigma^2\\)이 성립하면 최소제곱 추정량 \\(\\bm b=(X^tX)^{-1}X^t \\bm y\\)는 \\(\\bm \\beta\\)의 최소분산 선형 불편추정량은 이다. 이 정리를 Gauss-Markov 정리라고 하며 이는 회귀계수 \\(\\bm \\beta\\)의 모든 선형 불편 추정량중에 최소제곱 추정량 \\(\\bm b=(X^tX)^{-1}X^t \\bm y\\)이 가장 작은 분산을 가짐을 뜻한다 (Best Linear Unbiased Estimator; BLUE). 2.4 수식 예제 \\begin{equation*} \\pardiff{ \\bm y}{\\bm x} \\equiv \\pardiff{ \\bm y^t}{\\bm x} \\underset{def}{\\equiv} \\begin{bmatrix} \\pardiff{ y_1}{ x_1} &amp; \\pardiff{ y_2}{ x_1} &amp; \\pardiff{ y_3}{ x_1} \\\\ \\pardiff{ y_1}{ x_2} &amp; \\pardiff{ y_2}{ x_2} &amp; \\pardiff{ y_3}{ x_2} \\\\ \\end{bmatrix} = \\begin{bmatrix} 2x_1 &amp; \\exp(x_1) &amp; \\cos(x_1) \\\\ 1 &amp; 3 &amp; 3x_2^2 \\end{bmatrix} \\end{equation*} \\[\\begin{equation*} \\pardiff{ \\bm y}{\\bm x} \\equiv \\pardiff{ \\bm y^t}{\\bm x} \\underset{def}{\\equiv} \\begin{bmatrix} \\pardiff{ y_1}{ x_1} &amp; \\pardiff{ y_2}{ x_1} &amp; \\pardiff{ y_3}{ x_1} \\\\ \\pardiff{ y_1}{ x_2} &amp; \\pardiff{ y_2}{ x_2} &amp; \\pardiff{ y_3}{ x_2} \\\\ \\end{bmatrix} = \\begin{bmatrix} 2x_1 &amp; \\exp(x_1) &amp; \\cos(x_1) \\\\ 1 &amp; 3 &amp; 3x_2^2 \\end{bmatrix} \\end{equation*}\\] \\begin{align*} \\pardiff{ S(\\beta_0 , \\beta_1)}{\\beta_0} &amp; = \\sum^n_{i=1}(-2)[y_i-(\\beta_0+\\beta_1 x_i)]=0 \\\\ \\pardiff{ S(\\beta_0 , \\beta_1)}{\\beta_1} &amp; = \\sum^n_{i=1}(-2 x_i)[y_i-(\\beta_0+\\beta_1 x_i)]=0 \\end{align*} \\[\\begin{align*} \\pardiff{ S(\\beta_0 , \\beta_1)}{\\beta_0} &amp; = \\sum^n_{i=1}(-2)[y_i-(\\beta_0+\\beta_1 x_i)]=0 \\\\ \\pardiff{ S(\\beta_0 , \\beta_1)}{\\beta_1} &amp; = \\sum^n_{i=1}(-2 x_i)[y_i-(\\beta_0+\\beta_1 x_i)]=0 \\end{align*}\\] \\begin{align} S( \\bm \\beta ) &amp; = ( \\bm y - \\bm X \\bm \\beta)^t( \\bm y - \\bm X \\bm \\beta ) \\notag \\\\ &amp; = \\bm y^t \\bm y - \\bm y^t \\bm X \\bm \\beta - \\bm \\beta^t \\bm X^t \\bm y + \\bm \\beta^t \\bm X^t \\bm X \\bm \\beta \\notag \\\\ &amp; = \\bm y^t \\bm y -2 \\bm \\beta^t \\bm X^t \\bm y + \\bm \\beta^t \\bm X^t \\bm X \\bm \\beta (\\#eq:rsq3) \\end{align} \\[\\begin{align} S( \\bm \\beta ) &amp; = ( \\bm y - \\bm X \\bm \\beta)^t( \\bm y - \\bm X \\bm \\beta ) \\notag \\\\ &amp; = \\bm y^t \\bm y - \\bm y^t \\bm X \\bm \\beta - \\bm \\beta^t \\bm X^t \\bm y + \\bm \\beta^t \\bm X^t \\bm X \\bm \\beta \\notag \\\\ &amp; = \\bm y^t \\bm y -2 \\bm \\beta^t \\bm X^t \\bm y + \\bm \\beta^t \\bm X^t \\bm X \\bm \\beta \\tag{2.2} \\end{align}\\] "],["figure.html", "제 3 장 그림 3.1 R 로 생성한 그림 3.2 그림 화일 3.3 그림의 참조 3.4 2개 이상의 그림 3.5 패키지 ggplot2 예제", " 제 3 장 그림 3.1 R 로 생성한 그림 3.1.1 그림 기초 R로 생성된 그림은 다음과 같이 rmarkdown으로 쉽게 나타낼 수 있다. 그림에서 한글이 깨질 수 있으므로 절 5.2 에 나오는 처리를 꼭 해주어야 한다. 그림을 표시하는 경우 중요한 chunk 선택문은 다음과 같다. out.width='80%': 그림의 크기 조절 fig.asp=.75 : 높이/폭의 상대적인 비율 fig.align='center' 그림의 위치 fig.cap='그림 제목' : 그림의 제목 다음 그림은 다음의 chunk 선택문을 이용한 그림이다. out.width=&#39;80%&#39;, fig.asp=.75, fig.align=&#39;center&#39;, fig.cap=&#39;속도와 제동 거리간의 관계&#39; plot(cars, pch = 16, cex = 1.3, col = &quot;blue&quot;, xlab = &quot;속도&quot;, ylab = &quot;제동거리&quot;) abline(lm(dist ~ speed, data = cars)) 그림 3.1: 속도와 제동 거리간의 관계 다음 그림은 다음의 chunk 선택문을 이용한 그림이다. out.width=&#39;50%&#39;, fig.asp=1.25 , fig.align=&#39;left&#39; plot(cars, pch = 16, cex = 1.3, col = &quot;blue&quot;, xlab = &quot;속도&quot;, ylab = &quot;제동거리&quot;) abline(lm(dist ~ speed, data = cars)) 그림 3.2: 속도와 제동 거리간의 관계 3.2 그림 화일 화일로 된 그림을 불러오는 방법은 두 가지가 있다. Markdown 명령문을 사용하는 방법과 R 명령문 knitr::include_graphics 을 사용할 수 있다. 참고로 그림 라벨을 지정하거나 크기를 바꾸는 작업은 Markdown 명령문을을 이용하는 것보다 R 명령문 knitr::include_graphics 을 사용하는 것이 더 편리하다. 그림 화일 f35.jpg 이 프로젝트 디렉토리 아래 myimages/ 디렉토리에 저장되어 있다고 하자 (그림출처:https://rokaf.airforce.mil.kr/) 3.2.1 R 명령문의 사용 R 명령문 knitr::include_graphics을 사용하여 그림화일을 불러올 수 있다. 이때 사용되는 중요한 chunk 명령어는 다음과 같다. out.width=\"50%\" : 그림의 크기 조절 fig.asp=.75 : 높이/폭의 상대적인 비율 fig.align='center' 그림의 위치 fig.cap='그림 제목' : 그림의 제목 knitr::include_graphics(&quot;myimages/f35.jpg&quot;)) knitr::include_graphics(&quot;myimages/f35.jpg&quot;) 그림 3.3: 한국공군 F-35A 3.2.2 Markdown 명령문의 사용 다음과 같은 명령어로 그림을 표시할 수 있다. ![한국공군 F-35A](myimages/f35.jpg){width=50%} 한국공군 F-35A 3.3 그림의 참조 그림을 참조하는 경우 chunk 명령문에 사용한 그림 이름 앞에 fig: 를 붙여서 \\@ref(fig:figname) 과 같이 참조한다. 예를 들면 그림 3.3 에 나타난 비행기는 한국 공군의 F-35A 이다. 3.4 2개 이상의 그림 하나의 화면에 두 개 이상의 그림을 그리려면 chunk 명령문에 fig.show = 'hold' 을 추가한다. par(mar = c(4, 4, .1, .1)) knitr::include_graphics(&quot;myimages/f35.jpg&quot;) plot(cars, pch = 16, cex = 1.3, col = &quot;blue&quot;, xlab=&quot;속도&quot;, ylab=&quot;제동거리&quot;) abline(lm(dist ~ speed, data=cars)) 그림 3.4: 동시에 두 개의 그림 그리기 다음과 같이 ggplot2 와 plot 함수를 이용하여 2 개의 그림을 같이 그릴 수 있다. par(mar = c(4, 4, .1, .1)) ggplot(cars, aes(x=speed, y=dist)) + geom_point() + geom_smooth(method = &quot;lm&quot;, se = FALSE) + labs(x = &quot;속도&quot;, y = &quot;거리&quot;) + theme_bw() plot(cars, pch = 16, cex = 1.3, col = &quot;blue&quot;, xlab=&quot;속도&quot;, ylab=&quot;제동거리&quot;) abline(lm(dist ~ speed, data=cars)) 그림 3.5: ggplot2 와 plot 3.5 패키지 ggplot2 예제 패키지 ggplot2 를 이용한 그림도 다음과 같이 나타낼 수 있다. ggplot(cars, aes(x = speed, y = dist)) + geom_point() + geom_smooth(method = &quot;lm&quot;, se = FALSE) + labs(x = &quot;속도&quot;, y = &quot;거리&quot;) + theme_bw() ## `geom_smooth()` using formula &#39;y ~ x&#39; ggplot(mtcars, aes(wt, mpg)) + geom_point(aes(colour = factor(cyl)), size = 2) + labs(x = &quot;무게&quot;, y = &quot;마일리지&quot;, color = &quot;실린더 개수&quot;) + theme_bw() ggplot(mpg, aes(displ, hwy)) + geom_point(size = 0.8) + facet_wrap(vars(class)) + labs(x = &quot;무게&quot;, y = &quot;마일리지&quot;) + theme_bw() "],["table.html", "제 4 장 표 4.1 kable 함수 4.2 kableExtra 패키지 4.3 markdown 표 4.4 표의 참조 4.5 Latex 표 작성 4.6 모형 적합결과 4.7 표 작성 패키지", " 제 4 장 표 4.1 kable 함수 knitr 패키지의 kable 함수를 이용하면 데이터프레임을 표 형식으로 표시할 수 있다. knitr::kable( head(iris, 5), caption = &#39;kable 로 만든 표&#39;, booktabs = TRUE, digits = 2 ) 표 4.1: kable 로 만든 표 Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa 4.2 kableExtra 패키지 kableExtra 패키지는 더 다양한 형식의 표를 만들 수 있다. head(iris, 5) %&gt;% kbl(caption = &#39;kableExtra 로 만든 표&#39;) %&gt;% kable_styling(bootstrap_options = &quot;striped&quot;, full_width = F, position = &quot;center&quot;, font_size = 11) 표 4.2: kableExtra 로 만든 표 Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa kableExtra 패키지의 자세한 이용법은 매뉴얼 에서 찾을 수 있다. 4.3 markdown 표 markdown 형식을 이용하여 직접 표를 작성할 수 있다. | 환자 번호 | Treatment | Value | |------:|:------:|:----------| | 1 | a | $\\alpha$ | | 2 | b | $\\beta$ | | 3 | b | $\\gamma$ | : (\\#tab:marktable) 마크다운 테이블 표 4.3: 마크다운 테이블 환자 번호 Treatment Value 1 a \\(\\alpha\\) 2 b \\(\\beta\\) 3 b \\(\\gamma\\) 다음과 같이 분산분석표를 markdown 표로 만들 수 있다. | 요인 | 제곱합 | 자유도 | 평균제곱합 | $F_0$ | p-값 | |:-----------:|--------:|-----------:|---------------:|:-------:|---------:| | 처리 | $SS_A$ | $\\phi_A = a-1$ | $MS_A=SS_A/\\phi_A$ | $F_0=MS_A/MS_E$ | $P[F(\\phi_A, \\phi_E) &gt; F_0 ]$ | | 잔차 | $SS_E$ | $\\phi_E=a(r-1)$ | $MS_E=SS_E/\\phi_E$ | | | | 총합 | $SS_T$ | $\\phi_T = ar-1$ | | | | 분산분석표 요인 제곱합 자유도 평균제곱합 \\(F_0\\) p-값 처리 \\(SS_A\\) \\(\\phi_A = a-1\\) \\(MS_A=SS_A/\\phi_A\\) \\(F_0=MS_A/MS_E\\) \\(P[F(\\phi_A, \\phi_E) &gt; F_0 ]\\) 잔차 \\(SS_E\\) \\(\\phi_E=a(r-1)\\) \\(MS_E=SS_E/\\phi_E\\) 총합 \\(SS_T\\) \\(\\phi_T = ar-1\\) 다양한 종류의 markdown 표를만드는 방법은 Markdown tables 에서 찾을 수 있다. 4.4 표의 참조 표을 참조하는 경우 chunk 명령문에 사용한 표 이름 앞에 tab: 를 붙여서 \\@ref(tab:tablename) 과 같이 참조한다. 만약 markdown 표를 만드는 경우 위에서 나타난 것과 같이 (\\#tab:tabelname) 으로 참조문을 붙여준다. 예를 들면 표 4.2 는 kableExtra 패키지를 이용하여 만든 것이며 표 4.3 은 markdown 으로 작성한 표이다. 4.5 Latex 표 작성 먼저 언급할 점은 bookdown 패키지를 이용하여 표를 만드는 경우 위에서 언급한 kable 과 kableExtra 로 만든 표는 수정없이 PDF 화일에서 표로 만들진다. 또한 markdown 으로 만든 표도 수정없이 PDF 화일에서 표로 만들진다. 4.6 모형 적합결과 4.6.1 HTML+PDF 형식 통계적 모형을 적합한 결과를 수정없이 동시에 HTML 형식과 PDF 형식의 표로 만들어 주는 패키지는 여러 개 있지만 이 중에 modelsummary 패키지의 함수 modelsummary 가 가장 사용하기 쉽다. fm1 &lt;- lm(mpg ~ cyl + hp + wt, data = mtcars) modelsummary(fm1) Model 1 (Intercept) 38.752 (1.787) cyl -0.942 (0.551) hp -0.018 (0.012) wt -3.167 (0.741) Num.Obs. 32 R2 0.843 R2 Adj. 0.826 AIC 155.5 BIC 162.8 Log.Lik. -72.738 F 50.171 modelsummary(fm1, output = &quot;flextable&quot;) .tabwid table{ border-collapse:collapse; line-height:1; margin-left:auto; margin-right:auto; border-width: 0; display: table; margin-top: 1.275em; margin-bottom: 1.275em; border-spacing: 0; border-color: transparent; } .tabwid_left table{ margin-left:0; } .tabwid_right table{ margin-right:0; } .tabwid td { padding: 0; } .tabwid a { text-decoration: none; } .tabwid thead { background-color: transparent; } .tabwid tfoot { background-color: transparent; } .tabwid table tr { background-color: transparent; } .cl-8499a6c0{border-collapse:collapse;}.cl-8494cfba{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8494e23e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-84950dae{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84950dc2{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84950dcc{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-84950dd6{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;} Model 1(Intercept)38.752(1.787)cyl-0.942(0.551)hp-0.018(0.012)wt-3.167(0.741)Num.Obs.32R20.843R2 Adj.0.826AIC155.5BIC162.8Log.Lik.-72.738F50.171 fm2 &lt;- lmer(Reaction ~ Days + (1 + Days | Subject), data = sleepstudy) modelsummary(fm2) Model 1 (Intercept) 251.405 (6.825) Days 10.467 (1.546) sd__(Intercept) 24.741 cor__(Intercept).Days 0.066 sd__Days 5.922 sd__Observation 25.592 AIC 1755.6 BIC 1774.8 Log.Lik. -871.814 REMLcrit 1743.628 modelsummary 패키지의 자세한 이용법은 매뉴얼 에서 찾을 수 있다. 4.6.2 HTML 형식 통계적 모형을 적합한 결과를 HTML 형식의 표로 만들어 주는 패키지는 sjplot 의 함수 tab_model 이 매우 편리하고 여러 가지 다양한 형태의 출력을 만들기 쉽다. 아쉽게도 sjplot 의 함수 tab_model 는 Latex 을 이용하여 PDF 형식으로 출력하는 방법은 있지만 매우 목잡하여 사용하기 어렵다. tab_model(fm1) mpg Predictors Estimates CI p (Intercept) 38.75 35.09 – 42.41 &lt;0.001 cyl -0.94 -2.07 – 0.19 0.098 hp -0.02 -0.04 – 0.01 0.140 wt -3.17 -4.68 – -1.65 &lt;0.001 Observations 32 R2 / R2 adjusted 0.843 / 0.826 tab_model(fm2) Reaction Predictors Estimates CI p (Intercept) 251.41 238.03 – 264.78 &lt;0.001 Days 10.47 7.44 – 13.50 &lt;0.001 Random Effects σ2 654.94 τ00 Subject 612.10 τ11 Subject.Days 35.07 ρ01 Subject 0.07 ICC 0.72 N Subject 18 Observations 180 Marginal R2 / Conditional R2 0.279 / 0.799 sjplot 패키지의 자세한 이용법은 매뉴얼 에서 찾을 수 있다. 4.7 표 작성 패키지 다양하고 복잡한 표를 만들 수 있는 다른 패키지들은 다음과 같다. flextable package arsenal package gtsummary package gt package moonBook package "],["sometips.html", "제 5 장 다양한 방법들 5.1 R 명령어 정리 5.2 그림에서 한글 깨짐 방지 5.3 코드 숨기기 5.4 chunk 명령문 보이기 5.5 슬라이드와 표 크기 5.6 HTML과 PDF에 따른 선택적 실행 5.7 HTML 출력의 폭 조정 5.8 유용한 패키지들", " 제 5 장 다양한 방법들 5.1 R 명령어 정리 매우 긴 R 명령어를 보기 좋게 정리하여 보여주려면 chunk 선택문으로 tidy=T 를 지정한다. 5.2 그림에서 한글 깨짐 방지 R 에서 일반 그림이나 ggplot2 에서 한글 깨짐 방지를 위하여 아래 3 문장은 index.Rmd 의 최초 option 에 추가합니다 (macOS 사용자는 필수). library(showtext) font_add_google(&quot;Nanum Pen Script&quot;, &quot;gl&quot;) showtext_auto() 5.3 코드 숨기기 HTML 로 책을 만드는 경우 코드를 숨시고 다시 보여줄수 있는 기능을 이용하려면 _output.yml 화일의 bookdown::gitbook: 부분에 다음과 같은 명령어를 추가한다. hide_code.html 화일은 책의 프로젝트 디렉토리에 있어야 한다. bookdown::gitbook: includes: in_header: hide_code.html 5.4 chunk 명령문 보이기 knitr 명령의 chunk 옵션을 보여 주기 위해서는 인라인 R 명령어 (`r ''`) 를 chunk 명령어 전에 써주어야 한다. ```` `r &#39;&#39;````{r} # a literal code chunk ``` ```` 5.5 슬라이드와 표 크기 Rmarkdown 으로 latex beamer slide를 작성할 때 테이블의 크기를 맞추는 방법 knitr::kable(mtcars[1:10, 1:10], format = &quot;latex&quot;, booktabs = T) %&gt;% kableExtra::kable_styling(font_size = 7) 5.6 HTML과 PDF에 따른 선택적 실행 bookdown 을 사용하여 책을 만드는 경우 HTML 형식이 PDF 형식보다 만들기 쉽다. 따라서 책을 만드는 경우 먼저 HTML로 만든 뒤에 Latex 을 이용하여 여러 가지 미세한 조정을 해서 PDF 형식으로 만들어야 한다. 만약 어떤 프로그램 코드를 HTML 과 PDF의 형식에 따라서 선택적으로 실행해야 하는 경우 다음과 같은 명령분을 통해서 출력형식이 \"html\" 인지 \"latex\" 인지 알 수 있다. is_html &lt;- knitr::is_html_output() is_latex &lt;- knitr::is_latex_output() 이러한 출력 형식의 결과값을 이용하여 chunk 명령어인 evel=is_html 또는 evel=is_latex 을 이용하여 출력을 선택적으로 표시할 수 있다. print(&quot;결과 형식은 HTML 입니다.&quot;) ## [1] &quot;결과 형식은 HTML 입니다.&quot; print(&quot;결과 형식은 PDF 입니다.&quot;) 5.7 HTML 출력의 폭 조정 HTML 형식으로 책을 만드는 경우 폭이 너무 좁아서 늘릴 필요가 있는 경우가 있다. HTML 출력의 폭을 넓힐려면 style.css 화일의 마지막 줄에 다음과 같은 문장을 추기한다. .book .book-body .page-wrapper .page-inner { max-width: 1000px; } 5.8 유용한 패키지들 패키지 xfun : 패키지 xfun 은 화일에서 문자열을 찾거나 대치하는 유용한 함수들을 제공한다. 패키지 xfun 설명서 패키지 cowplot : 패키지 cowplot 은 ggplot2 에 다양한 기능을 추가한 패키지이다. 여러 개의 그림을 한 화면에 배치할 때 위치의 조정, xy 축의 스케일 조정 등 미세한 조정을 위한 다양한 기능을 제공한다. 패키지 cowplot 설명서 package 패키지 rticle : 패키지 rticle 는 논문 작성을 위한 template 화일을 제공한다. 패키지 rticle 설명서 package "],["appmatrix.html", "부록 A: 행렬대수 A.1 Woodbury formula A.2 행렬식", " 부록 A: 행렬대수 A.1 Woodbury formula \\[ ( A+ U C V)^{-1} = A^{-1}- A^{-1} U ( C^{-1} + V A^{-1} U)^{-1} V A^{-1} \\] \\[ ( I+ U C V)^{-1} = I - U ( C^{-1} + V U)^{-1} V \\] \\[ ( A+ u v^t)^{-1} = A^{-1} - \\frac{ A^{-1} u v^t A^{-1}}{1+ v^t A^{-1} u} \\] \\[ (a I_n + b 1_n 1_n^t)^{-1} = \\frac{1}{a} \\left [ I_n - \\frac{b}{a+nb} 1_n 1_n^t \\right ] \\] A.2 행렬식 \\[ | A^t| =| A| \\] \\[ |c A| =c^k | A|\\] 여기서 \\(k\\)는 행렬 \\(A\\)의 차원이다. \\[ | A B| =| A| | B| \\] \\[ | A^{-1}| =| A|^{-1} \\] \\[| a I_n + b 1_n 1_n^t | = a^{n-1}(a+nb) \\] "],["references.html", "References", " References "]]
